@using Horeca.OrderLines
@using Horeca.Orders
@using Horeca.ProductBids
@using Horeca.Products
@using Volo.Abp.AspNetCore.Components
@inherits HorecaComponentBase
@inject IProductAppService ProductAppService
@inject IProductBidAppService ProductBidAppService
@inject IOrderAppService OrderAppService 
@inject IOrderLineAppService OrderLineAppService 

<h3>ProductInfo</h3>

<Row>
    <Column ColumnSize="ColumnSize.Is6">
        <Image Width ="Width.Is100" Height = "Height.Is100" Source="https://dummyimage.com/284x206/000/fff"></Image>
    </Column>
    <Column ColumnSize="ColumnSize.Is6">
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Name:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @Product.Name
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Manufacturer:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @Product.Manufacturer
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Approval State:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @Product.ApprovalState
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Creation Time:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @Product.CreationTime
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Price:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @ProductBidDto.Price
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Min Purchase Amount:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @ProductBidDto.MinPurchaseAmount
            </Column>
        </Row>
        <Row>
            <Column ColumnSize="ColumnSize.Is6">
                @L["Max Purchase Amount:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is6">
                @ProductBidDto.MaxPurchaseAmount
            </Column>
        </Row>
        <Row>
        @if (CanCreateOrder)
        {
            <Column ColumnSize="ColumnSize.Is6">
                @L["Count:"]
            </Column>
            <Column ColumnSize="ColumnSize.Is4">
                <NumericEdit 
                TValue="int"
                Min="@ProductBidDto.MinPurchaseAmount"
                Max="@ProductBidDto.MaxPurchaseAmount" 
                class = "itemCounter"
                @bind-Value="@OrderLine.Count"/>
            </Column>
        }
        </Row>
    </Column>
</Row>


<Row>
    <Column ColumnSize="ColumnSize.Is6">
        <Rating Color="Color.Primary" />
    </Column>
    @if (CanCreateOrder)
    {
        <Column ColumnSize="ColumnSize.Is6">
            <Button class="button" Clicked='()=>AddToCard()'>
                @L["Add to card"]
            </Button>
        </Column>
    }
</Row>

<Row>
    @Product.Description
</Row>
<Row>
    @foreach (var product in ProductBidList)
    {
        <Column ColumnSize="ColumnSize.Is4">
            <Card>
                <CardImage Width ="Width.Is100" Height = "Height.Is50" Source="https://dummyimage.com/284x206/000/fff"></CardImage>
                <CardBody>
                    <Rating Color="Color.Primary" />
                    <CardTitle Size="5">@product.Price</CardTitle>
                    <CardSubtitle>@Product.Manufacturer</CardSubtitle>
                    <Row>
                        <Column ColumnSize="ColumnSize.Is12">
                            <Button class="button" Clicked='()=>NavigateTo(product)'>
                                @L["Go To Details"]
                            </Button>
                        </Column>
                    </Row>
                </CardBody>
            </Card>
        </Column>
    }
</Row>

